<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEWM-N328 Final Project</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <style type="text/css">

        h1 {
            font-family: Helvetica, sans-serif;
            font-size: 14px;
            font-weight: bold;
        }
/* 
        .area {
            stroke: none;
        }

        .area:hover {
            fill: yellow;
        } */

    </style>
</head>
<body>
    <h1>Price of Diamonds by Carat</h1>
    <script type="text/javascript">  

        var w = 1000;
        var h = 1000;
        var padding = 50;
        var  margin = { top: 50, right: 30, bottom: 20, left: 30 };

        d3.json('countries.geojson').then(function(json) {
            let projection = d3.geoEqualEarth();
            projection.fitSize([w, h], json);
            let geoGenerator = d3.geoPath()
            .projection(projection);

            let svg = d3.select("body").append('svg')
            .style("width", w).style("height", h);

            svg.append('g').selectAll('path')
            .data(json.features)
            .join('path')
            .attr('d', geoGenerator)
            .attr('fill', '#088')
            .attr('stroke', '#000');
        });


/*         var rowConverter = function(d) {  
                return {        
                    index: parseInt(d.Index), 
                    carat: parseFloat(d.carat),
                    cut: d.cut,
                    color: d.color,
                    clarity: d.clarity,
                    depth: parseFloat(d.depth),
                    table: parseInt(d.table),
                    price: parseInt(d.price),
                    x: parseFloat(d.x),
                    y: parseFloat(d.y),
                    z: parseFloat(d.z)
                }; 
            }

        d3.csv("diamonds.csv", rowConverter).then(function(data) {    

            var xScale = d3.scaleLinear()
            .domain([d3.min(data, function(d) {return d.carat;}), d3.max(data, function(d) {return d.carat;})])
            .range([padding, w - padding * 2]);

            var yScale = d3.scaleLinear()
            .domain([d3.min(data, function(d) {return d.price;}), d3.max(data, function(d) {return d.price;})])
            .range([h - padding, padding])

            svg.selectAll("circle")
            .data(data)
            .enter()
            .append("circle")
            .attr("cx", function(d) {return xScale(d.carat);})
            .attr("cy", function(d) {return yScale(d.price);})
            .attr("r", 2)
            .on("mouseover", function() {    
                d3.select(this)
                .attr("fill", "orange")
                .attr("r", 4); }
                )
            .on("mouseout", function() {    
                d3.select(this)
                .attr("fill", "black")
                .attr("r", 2); }
                );

            var xAxis = d3.axisBottom()
            .scale(xScale);

            var yAxis = d3.axisLeft()
            .scale(yScale)

            svg.append("g")
            .attr("class", "axis")
            .attr("transform", "translate(0," + (h - padding) + ")")
            .call(xAxis);

            svg.append("g")
            .attr("class", "axis")
            .attr("transform", "translate(" + padding + ",0)")
            .call(yAxis);

        });  */      
    
    </script> 
</body>
</html>